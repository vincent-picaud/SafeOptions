{\rtf1\ansi\uc1\deff0{\fonttbl{\f1\fswiss Source Sans Pro;}{\f2\froman Times;}{\f3\fswiss Inherited;}{\f4\fswiss Bitstream Vera Sans;}{\f5\fnil Mathematica;}}{\colortbl;\red76\green76\blue76;\red246\green246\blue246;\red52\green52\blue52;\red0\green0\blue0;\red129\green43\blue38;\red66\green130\blue31;\red179\green179\blue179;\red199\green108\blue41;}{\stylesheet{\s0\f1 \fs90\cf1\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql MathematicaCellTitle;}{\cs1\additive MathematicaFormatTextForm;}{\s2\f1 \fs68\cf3\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql MathematicaCellChapter;}{\s3\f1 \fs30\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql MathematicaCellText;}{\s4\f1 \fs56\cf1\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql MathematicaCellSubchapter;}{\s5\f2 \fs26\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql MathematicaCellCode;}{\cs6\f3 \additive MathematicaFormatStandardForm;}{\s7\f2 \fs26\cf1\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\brdrt\brdrs\brdrw5\brdrcf4\brdrb\brdrs\brdrw5\brdrcf4\brdrl\brdrs\brdrw5\brdrcf4\brdrr\brdrs\brdrw5\brdrcf4 MathematicaCellOutput;}{\s8\f4 \fs22\cf5\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\brdrt\brdrs\brdrw5\brdrcf4\brdrb\brdrs\brdrw5\brdrcf4\brdrl\brdrs\brdrw5\brdrcf4\brdrr\brdrs\brdrw5\brdrcf4 MathematicaCellMessage;}{\s9\f2 \fs24\cf1\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\brdrt\brdrs\brdrw5\brdrcf4\brdrb\brdrs\brdrw5\brdrcf4\brdrl\brdrs\brdrw5\brdrcf4\brdrr\brdrs\brdrw5\brdrcf4 MathematicaCellPrint;}{\s10\f1 \fs56\cf6\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\brdrt\brdrs\brdrw20\brdrcf7 MathematicaCellSection;}{\s11\f1 \fs40\cf8\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql MathematicaCellSubsection;}}{\pard{\s0\f1 \fs90\cf1\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\cs1 {SaferOption package demo}\par}}{\pard{\s2\f1 \fs68\cf3\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\cs1 {Problems with Options}\par}}{\pard{\s3\f1 \fs30\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\cs1 {I often encountered these problems which discouraged me from using the options:\par -  OptionPattern is very permissive\par -  Default values are not forwarded}\par}}{\pard{\s4\f1 \fs56\cf1\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\cs1 {OptionPattern is very permissive}\par}}{\pard{\s5\f2 \fs26\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\cs6\f3  foo[opts:OptionsPattern[]]:=opts\par}}{\pard{\s5\f2 \fs26\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\cs6\f3  foo[2]\par foo[\{\}]\par foo[\{\{\}\}]\par foo[a->1,b->2]\par foo[\{a->1,b->2\}]\par foo[\{\{a->1,b->2\}\}]\par foo[\{\{\{a->1,b->2\}\}\}]\par}}{\pard{\s7\f2 \fs26\cf1\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\brdrt\brdrs\brdrw5\brdrcf4\brdrb\brdrs\brdrw5\brdrcf4\brdrl\brdrs\brdrw5\brdrcf4\brdrr\brdrs\brdrw5\brdrcf4\cs6\f3  foo[2]\par}}{\pard{\s7\f2 \fs26\cf1\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\brdrt\brdrs\brdrw5\brdrcf4\brdrb\brdrs\brdrw5\brdrcf4\brdrl\brdrs\brdrw5\brdrcf4\brdrr\brdrs\brdrw5\brdrcf4\cs6\f3  \{\}\par}}{\pard{\s7\f2 \fs26\cf1\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\brdrt\brdrs\brdrw5\brdrcf4\brdrb\brdrs\brdrw5\brdrcf4\brdrl\brdrs\brdrw5\brdrcf4\brdrr\brdrs\brdrw5\brdrcf4\cs6\f3  \{\{\}\}\par}}{\pard{\s7\f2 \fs26\cf1\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\brdrt\brdrs\brdrw5\brdrcf4\brdrb\brdrs\brdrw5\brdrcf4\brdrl\brdrs\brdrw5\brdrcf4\brdrr\brdrs\brdrw5\brdrcf4\cs6\f3  Sequence[a->1,b->2]\par}}{\pard{\s7\f2 \fs26\cf1\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\brdrt\brdrs\brdrw5\brdrcf4\brdrb\brdrs\brdrw5\brdrcf4\brdrl\brdrs\brdrw5\brdrcf4\brdrr\brdrs\brdrw5\brdrcf4\cs6\f3  \{a->1,b->2\}\par}}{\pard{\s7\f2 \fs26\cf1\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\brdrt\brdrs\brdrw5\brdrcf4\brdrb\brdrs\brdrw5\brdrcf4\brdrl\brdrs\brdrw5\brdrcf4\brdrr\brdrs\brdrw5\brdrcf4\cs6\f3  \{\{a->1,b->2\}\}\par}}{\pard{\s7\f2 \fs26\cf1\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\brdrt\brdrs\brdrw5\brdrcf4\brdrb\brdrs\brdrw5\brdrcf4\brdrl\brdrs\brdrw5\brdrcf4\brdrr\brdrs\brdrw5\brdrcf4\cs6\f3  \{\{\{a->1,b->2\}\}\}\par}}{\pard{\s3\f1 \fs30\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\cs1 {This is problematic when we want to process options:}\par}}{\pard{\s5\f2 \fs26\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\cs6\f3  foo[k_Symbol,opts:OptionsPattern[]]:=MemberQ[Keys[opts],k]\par}}{\pard{\s5\f2 \fs26\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\cs6\f3  foo[a,\{\}]            (* OK *)\par foo[a,\{a->1,b->2\}]     (* OK *)\par foo[a,\{\{a->1,b->2\}\}]   (* Problem: would expect true *)\par foo[a,a->1,b->2]       (* Problem: would expect true*)\par}}{\pard{\s7\f2 \fs26\cf1\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\brdrt\brdrs\brdrw5\brdrcf4\brdrb\brdrs\brdrw5\brdrcf4\brdrl\brdrs\brdrw5\brdrcf4\brdrr\brdrs\brdrw5\brdrcf4\cs6\f3  False\par}}{\pard{\s7\f2 \fs26\cf1\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\brdrt\brdrs\brdrw5\brdrcf4\brdrb\brdrs\brdrw5\brdrcf4\brdrl\brdrs\brdrw5\brdrcf4\brdrr\brdrs\brdrw5\brdrcf4\cs6\f3  True\par}}{\pard{\s7\f2 \fs26\cf1\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\brdrt\brdrs\brdrw5\brdrcf4\brdrb\brdrs\brdrw5\brdrcf4\brdrl\brdrs\brdrw5\brdrcf4\brdrr\brdrs\brdrw5\brdrcf4\cs6\f3  False\par}}{\pard{\s8\f4 \fs22\cf5\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\brdrt\brdrs\brdrw5\brdrcf4\brdrb\brdrs\brdrw5\brdrcf4\brdrl\brdrs\brdrw5\brdrcf4\brdrr\brdrs\brdrw5\brdrcf4\cs6\f3  Keys::argx: Keys called with 2 arguments; 1 argument is expected.\par}}{\pard{\s7\f2 \fs26\cf1\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\brdrt\brdrs\brdrw5\brdrcf4\brdrb\brdrs\brdrw5\brdrcf4\brdrl\brdrs\brdrw5\brdrcf4\brdrr\brdrs\brdrw5\brdrcf4\cs6\f3  False\par}}{\pard{\s4\f1 \fs56\cf1\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\cs1 {Option default values are not forwarded}\par}}{\pard{\s5\f2 \fs26\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\cs6\f3  Options[foo1] = \{a -> 1, b -> 2\};\par \par foo1[arg__, opts : OptionsPattern[]] := \par      Print["foo1 a=", OptionValue[a], " b=", OptionValue[b]]; \par \par Options[foo2] = \{b -> -2\};\par \par foo2[arg__, opts : OptionsPattern[]] := \par      Print["foo2 b=", OptionValue[b]];\par    \par Options[foo3] = \{a -> 10, b -> 20\};   \par \par foo3[opts : OptionsPattern[]] :=      \par     Block[\{\},\par       foo1[1, 2,FilterRules[\{opts\},Options[foo1]]]; \par       foo2[4, 5,FilterRules[\{opts\},Options[foo2]]]; \par      ];\par}}{\pard{\s5\f2 \fs26\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\cs6\f3  foo3[] (* Problem: would expect a{\f5 \u-2782?}10 and b{\f5 \u-2782?}20, moreover we have two incompatible values for b: +2 and -2 *)\par}}{\pard{\s9\f2 \fs24\cf1\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\brdrt\brdrs\brdrw5\brdrcf4\brdrb\brdrs\brdrw5\brdrcf4\brdrl\brdrs\brdrw5\brdrcf4\brdrr\brdrs\brdrw5\brdrcf4\cs6\f3  foo1 a= 1  b= 2\par}}{\pard{\s9\f2 \fs24\cf1\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\brdrt\brdrs\brdrw5\brdrcf4\brdrb\brdrs\brdrw5\brdrcf4\brdrl\brdrs\brdrw5\brdrcf4\brdrr\brdrs\brdrw5\brdrcf4\cs6\f3  foo2 b= -2\par}}{\pard{\s5\f2 \fs26\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\cs6\f3  foo3[a->5] (* ok for a, but error prone... here we forgot b *)\par}}{\pard{\s9\f2 \fs24\cf1\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\brdrt\brdrs\brdrw5\brdrcf4\brdrb\brdrs\brdrw5\brdrcf4\brdrl\brdrs\brdrw5\brdrcf4\brdrr\brdrs\brdrw5\brdrcf4\cs6\f3  foo1 a= 5  b= 2\par}}{\pard{\s9\f2 \fs24\cf1\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\brdrt\brdrs\brdrw5\brdrcf4\brdrb\brdrs\brdrw5\brdrcf4\brdrl\brdrs\brdrw5\brdrcf4\brdrr\brdrs\brdrw5\brdrcf4\cs6\f3  foo2 b= -2\par}}{\pard{\s2\f1 \fs68\cf3\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\cs1 {SaferOption package}\par}}{\pard{\s3\f1 \fs30\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\cs1 {The ideas are simples:\par - we systematically create an exhaustive list of options for each function (thanks to the createOptionList[] function).\par - we systematically use a normalized representation for option set (thanks to the normalizeOptionPattern[] function)}\par}}{\pard{\s4\f1 \fs56\cf1\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\cs1 {OptionPattern is very permissive: solution use normalizeOptionPattern[]}\par}}{\pard{\s5\f2 \fs26\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\cs6\f3  foo[opts:OptionsPattern[]]:=normalizeOptionPattern[opts]\par}}{\pard{\s5\f2 \fs26\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\cs6\f3  foo[2]\par foo[\{\}]\par foo[\{\{\}\}]\par foo[a->1,b->2]\par foo[\{a->1,b->2\}]\par foo[\{\{a->1,b->2\}\}]\par foo[\{\{\{a->1,b->2\}\}\}]\par}}{\pard{\s7\f2 \fs26\cf1\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\brdrt\brdrs\brdrw5\brdrcf4\brdrb\brdrs\brdrw5\brdrcf4\brdrl\brdrs\brdrw5\brdrcf4\brdrr\brdrs\brdrw5\brdrcf4\cs6\f3  foo[2]\par}}{\pard{\s7\f2 \fs26\cf1\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\brdrt\brdrs\brdrw5\brdrcf4\brdrb\brdrs\brdrw5\brdrcf4\brdrl\brdrs\brdrw5\brdrcf4\brdrr\brdrs\brdrw5\brdrcf4\cs6\f3  \{\}\par}}{\pard{\s7\f2 \fs26\cf1\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\brdrt\brdrs\brdrw5\brdrcf4\brdrb\brdrs\brdrw5\brdrcf4\brdrl\brdrs\brdrw5\brdrcf4\brdrr\brdrs\brdrw5\brdrcf4\cs6\f3  \{\}\par}}{\pard{\s7\f2 \fs26\cf1\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\brdrt\brdrs\brdrw5\brdrcf4\brdrb\brdrs\brdrw5\brdrcf4\brdrl\brdrs\brdrw5\brdrcf4\brdrr\brdrs\brdrw5\brdrcf4\cs6\f3  \{a->1,b->2\}\par}}{\pard{\s7\f2 \fs26\cf1\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\brdrt\brdrs\brdrw5\brdrcf4\brdrb\brdrs\brdrw5\brdrcf4\brdrl\brdrs\brdrw5\brdrcf4\brdrr\brdrs\brdrw5\brdrcf4\cs6\f3  \{a->1,b->2\}\par}}{\pard{\s7\f2 \fs26\cf1\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\brdrt\brdrs\brdrw5\brdrcf4\brdrb\brdrs\brdrw5\brdrcf4\brdrl\brdrs\brdrw5\brdrcf4\brdrr\brdrs\brdrw5\brdrcf4\cs6\f3  \{a->1,b->2\}\par}}{\pard{\s7\f2 \fs26\cf1\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\brdrt\brdrs\brdrw5\brdrcf4\brdrb\brdrs\brdrw5\brdrcf4\brdrl\brdrs\brdrw5\brdrcf4\brdrr\brdrs\brdrw5\brdrcf4\cs6\f3  \{a->1,b->2\}\par}}{\pard{\s3\f1 \fs30\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\cs1 {using normalized representation simplifies further processings}\par}}{\pard{\s5\f2 \fs26\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\cs6\f3  foo[k_Symbol,opts:OptionsPattern[]]:=MemberQ[Keys[normalizeOptionPattern[opts]],k]\par}}{\pard{\s5\f2 \fs26\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\cs6\f3  foo[a,\{\}]            (* OK *)\par foo[a,\{a->1,b->2\}]     (* OK *)\par foo[a,\{\{a->1,b->2\}\}]   (* No more problem *)\par foo[a,a->1,b->2]       (* No more problem *)\par}}{\pard{\s7\f2 \fs26\cf1\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\brdrt\brdrs\brdrw5\brdrcf4\brdrb\brdrs\brdrw5\brdrcf4\brdrl\brdrs\brdrw5\brdrcf4\brdrr\brdrs\brdrw5\brdrcf4\cs6\f3  False\par}}{\pard{\s7\f2 \fs26\cf1\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\brdrt\brdrs\brdrw5\brdrcf4\brdrb\brdrs\brdrw5\brdrcf4\brdrl\brdrs\brdrw5\brdrcf4\brdrr\brdrs\brdrw5\brdrcf4\cs6\f3  True\par}}{\pard{\s7\f2 \fs26\cf1\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\brdrt\brdrs\brdrw5\brdrcf4\brdrb\brdrs\brdrw5\brdrcf4\brdrl\brdrs\brdrw5\brdrcf4\brdrr\brdrs\brdrw5\brdrcf4\cs6\f3  True\par}}{\pard{\s7\f2 \fs26\cf1\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\brdrt\brdrs\brdrw5\brdrcf4\brdrb\brdrs\brdrw5\brdrcf4\brdrl\brdrs\brdrw5\brdrcf4\brdrr\brdrs\brdrw5\brdrcf4\cs6\f3  True\par}}{\pard{\s2\f1 \fs68\cf3\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\cs1 {Reuse foo1, foo2 with MMA\u8217?s option system}\par}}{\pard{\s10\f1 \fs56\cf6\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\brdrt\brdrs\brdrw20\brdrcf7\cs1 {Foo1 & 2}\par}}{\pard{\s5\f2 \fs26\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\cs6\f3  Options[foo1] = \{a -> 1, b -> 2\};\par \par foo1[arg__, opts : OptionsPattern[]] := \par      Print["foo1 a=", OptionValue[a], " b=", OptionValue[b]]; \par \par Options[foo2] = \{b -> -2\};\par \par foo2[arg__, opts : OptionsPattern[]] := \par      Print["foo2 b=", OptionValue[b]];\par}}{\pard{\s10\f1 \fs56\cf6\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\brdrt\brdrs\brdrw20\brdrcf7\cs1 {Foo3 use SaferOptions system}\par}}{\pard{\s5\f2 \fs26\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\cs6\f3  Options[foo3] = createOptionList[\{a -> 10, b -> 1, c -> 4\}, Options /@ \{foo1, foo2\}];\par \par foo3[opts : OptionsPattern[]] :=      \par     Block[\{safeOpts = getOptionList[Options[foo3],opts]\},\par       foo1[1, 2,filterOptionList[Options[foo1],safeOpts]]; \par       foo2[4, 5,filterOptionList[Options[foo2],safeOpts]];\par      ];\par}}{\pard{\s3\f1 \fs30\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\cs1 {Default option values are forwarded}\par}}{\pard{\s5\f2 \fs26\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\cs6\f3  foo3[]\par}}{\pard{\s9\f2 \fs24\cf1\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\brdrt\brdrs\brdrw5\brdrcf4\brdrb\brdrs\brdrw5\brdrcf4\brdrl\brdrs\brdrw5\brdrcf4\brdrr\brdrs\brdrw5\brdrcf4\cs6\f3  foo1 a= 10  b= 1\par}}{\pard{\s9\f2 \fs24\cf1\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\brdrt\brdrs\brdrw5\brdrcf4\brdrb\brdrs\brdrw5\brdrcf4\brdrl\brdrs\brdrw5\brdrcf4\brdrr\brdrs\brdrw5\brdrcf4\cs6\f3  foo2 b= 1\par}}{\pard{\s3\f1 \fs30\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\cs1 {You can safely provide their values}\par}}{\pard{\s5\f2 \fs26\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\cs6\f3  foo3[a->2,b->3]\par}}{\pard{\s9\f2 \fs24\cf1\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\brdrt\brdrs\brdrw5\brdrcf4\brdrb\brdrs\brdrw5\brdrcf4\brdrl\brdrs\brdrw5\brdrcf4\brdrr\brdrs\brdrw5\brdrcf4\cs6\f3  foo1 a= 2  b= 3\par}}{\pard{\s9\f2 \fs24\cf1\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\brdrt\brdrs\brdrw5\brdrcf4\brdrb\brdrs\brdrw5\brdrcf4\brdrl\brdrs\brdrw5\brdrcf4\brdrr\brdrs\brdrw5\brdrcf4\cs6\f3  foo2 b= 3\par}}{\pard{\s4\f1 \fs56\cf1\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\cs1 {The createOptionList[] function}\par}}{\pard{\s5\f2 \fs26\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\cs6\f3  ?createOptionList\par Options[createOptionList]\par}}{\pard{\s9\f2 \fs24\cf1\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\brdrt\brdrs\brdrw5\brdrcf4\brdrb\brdrs\brdrw5\brdrcf4\brdrl\brdrs\brdrw5\brdrcf4\brdrr\brdrs\brdrw5\brdrcf4\cs6\f3  collects all the option, generally used to create Options[foo]=createOptionList[...]\par}}{\pard{\s7\f2 \fs26\cf1\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\brdrt\brdrs\brdrw5\brdrcf4\brdrb\brdrs\brdrw5\brdrcf4\brdrl\brdrs\brdrw5\brdrcf4\brdrr\brdrs\brdrw5\brdrcf4\cs6\f3  \{optionKeysToIgnore->\{\}\}\par}}{\pard{\s11\f1 \fs40\cf8\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\cs1 {Incompatible values}\par}}{\pard{\s3\f1 \fs30\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\cs1 {Incompatible values for "b" are detected}\par}}{\pard{\s5\f2 \fs26\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\cs6\f3  Options[foo3] = createOptionList[\{a -> 10, c -> 4\}, Options /@ \{foo1, foo2\}]\par}}{\pard{\s8\f4 \fs22\cf5\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\brdrt\brdrs\brdrw5\brdrcf4\brdrb\brdrs\brdrw5\brdrcf4\brdrl\brdrs\brdrw5\brdrcf4\brdrr\brdrs\brdrw5\brdrcf4\cs6\f3  SaferOptions::incompatibleOptions: Some options are incompatibles \{b->\{2,-2\}\}\par}}{\pard{\s7\f2 \fs26\cf1\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\brdrt\brdrs\brdrw5\brdrcf4\brdrb\brdrs\brdrw5\brdrcf4\brdrl\brdrs\brdrw5\brdrcf4\brdrr\brdrs\brdrw5\brdrcf4\cs6\f3  $Failed\par}}{\pard{\s3\f1 \fs30\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\cs1 {You must explicitly define the value}\par}}{\pard{\s5\f2 \fs26\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\cs6\f3  Options[foo3] = createOptionList[\{a -> 10, b->1,c -> 4\}, Options /@ \{foo1, foo2\}]\par}}{\pard{\s7\f2 \fs26\cf1\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\brdrt\brdrs\brdrw5\brdrcf4\brdrb\brdrs\brdrw5\brdrcf4\brdrl\brdrs\brdrw5\brdrcf4\brdrr\brdrs\brdrw5\brdrcf4\cs6\f3  \{a->10,b->1,c->4\}\par}}{\pard{\s5\f2 \fs26\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\cs6\f3  foo3[]\par}}{\pard{\s9\f2 \fs24\cf1\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\brdrt\brdrs\brdrw5\brdrcf4\brdrb\brdrs\brdrw5\brdrcf4\brdrl\brdrs\brdrw5\brdrcf4\brdrr\brdrs\brdrw5\brdrcf4\cs6\f3  foo1 a= 10  b= 1\par}}{\pard{\s9\f2 \fs24\cf1\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\brdrt\brdrs\brdrw5\brdrcf4\brdrb\brdrs\brdrw5\brdrcf4\brdrl\brdrs\brdrw5\brdrcf4\brdrr\brdrs\brdrw5\brdrcf4\cs6\f3  foo2 b= 1\par}}{\pard{\s11\f1 \fs40\cf8\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\cs1 {Ignored option}\par}}{\pard{\s3\f1 \fs30\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\cs1 {You can ignore some options}\par}}{\pard{\s5\f2 \fs26\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\cs6\f3  Options[foo3] = createOptionList[\{ b->1,c -> 4\}, Options /@ \{foo1, foo2\},optionKeysToIgnore->\{a\}]\par}}{\pard{\s7\f2 \fs26\cf1\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\brdrt\brdrs\brdrw5\brdrcf4\brdrb\brdrs\brdrw5\brdrcf4\brdrl\brdrs\brdrw5\brdrcf4\brdrr\brdrs\brdrw5\brdrcf4\cs6\f3  \{b->1,c->4\}\par}}{\pard{\s3\f1 \fs30\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\cs1 {In that case initial default values are used}\par}}{\pard{\s5\f2 \fs26\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\cs6\f3  foo3[]\par}}{\pard{\s9\f2 \fs24\cf1\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\brdrt\brdrs\brdrw5\brdrcf4\brdrb\brdrs\brdrw5\brdrcf4\brdrl\brdrs\brdrw5\brdrcf4\brdrr\brdrs\brdrw5\brdrcf4\cs6\f3  foo1 a= 1  b= 1\par}}{\pard{\s9\f2 \fs24\cf1\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\brdrt\brdrs\brdrw5\brdrcf4\brdrb\brdrs\brdrw5\brdrcf4\brdrl\brdrs\brdrw5\brdrcf4\brdrr\brdrs\brdrw5\brdrcf4\cs6\f3  foo2 b= 1\par}}{\pard{\s3\f1 \fs30\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\cs1 {Note: you can not use ignored option!}\par}}{\pard{\s5\f2 \fs26\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\cs6\f3  foo3[a->3]\par}}{\pard{\s8\f4 \fs22\cf5\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\brdrt\brdrs\brdrw5\brdrcf4\brdrb\brdrs\brdrw5\brdrcf4\brdrl\brdrs\brdrw5\brdrcf4\brdrr\brdrs\brdrw5\brdrcf4\cs6\f3  SaferOptions::unknownOptions: Unknown options \{a\}\par}}{\pard{\s9\f2 \fs24\cf1\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\brdrt\brdrs\brdrw5\brdrcf4\brdrb\brdrs\brdrw5\brdrcf4\brdrl\brdrs\brdrw5\brdrcf4\brdrr\brdrs\brdrw5\brdrcf4\cs6\f3  foo1 a= 1  b= 2\par}}{\pard{\s9\f2 \fs24\cf1\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\brdrt\brdrs\brdrw5\brdrcf4\brdrb\brdrs\brdrw5\brdrcf4\brdrl\brdrs\brdrw5\brdrcf4\brdrr\brdrs\brdrw5\brdrcf4\cs6\f3  foo2 b= -2\par}}{\pard{\s3\f1 \fs30\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\cs1 {Note : you cannot add option and ignore them in the same time}\par}}{\pard{\s5\f2 \fs26\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\cs6\f3  Options[foo3] = createOptionList[\{a -> 10, b->1,c -> 4\}, Options /@ \{foo1, foo2\},optionKeysToIgnore->\{a\}]\par}}{\pard{\s8\f4 \fs22\cf5\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\brdrt\brdrs\brdrw5\brdrcf4\brdrb\brdrs\brdrw5\brdrcf4\brdrl\brdrs\brdrw5\brdrcf4\brdrr\brdrs\brdrw5\brdrcf4\cs6\f3  SaferOptions::cannotAddAndIgnore: Cannot add and ignore in the same times these options: \{a\}\par}}{\pard{\s7\f2 \fs26\cf1\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\brdrt\brdrs\brdrw5\brdrcf4\brdrb\brdrs\brdrw5\brdrcf4\brdrl\brdrs\brdrw5\brdrcf4\brdrr\brdrs\brdrw5\brdrcf4\cs6\f3  $Failed\par}}{\pard{\s5\f2 \fs26\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\cs6\f3  Options[createOptionList]\par}}{\pard{\s7\f2 \fs26\cf1\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\brdrt\brdrs\brdrw5\brdrcf4\brdrb\brdrs\brdrw5\brdrcf4\brdrl\brdrs\brdrw5\brdrcf4\brdrr\brdrs\brdrw5\brdrcf4\cs6\f3  \{optionKeysToIgnore->\{\}\}\par}}{\pard{\s5\f2 \fs26\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\cs6\f3  Options[foo3] = createOptionList[\{a -> 10, c -> 4\}, Options /@ \{foo1, foo2\}];\par \par foo3[opts : OptionsPattern[]] :=      \par     Block[\{safeOpts = getOptionList[Options[foo3],opts]\},\par       foo1[1, 2,filterOptionList[Options[foo1],safeOpts]]; \par       foo2[4, 5,filterOptionList[Options[foo2],safeOpts]];\par      ];\par}}{\pard{\s8\f4 \fs22\cf5\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\brdrt\brdrs\brdrw5\brdrcf4\brdrb\brdrs\brdrw5\brdrcf4\brdrl\brdrs\brdrw5\brdrcf4\brdrr\brdrs\brdrw5\brdrcf4\cs6\f3  SaferOptions::incompatibleOptions: Some options are incompatibles \{b->\{2,-2\}\}\par}}{\pard{\s5\f2 \fs26\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\cs6\f3  createOptionList[\{a -> 10, c -> 4\}, Options /@ \{foo1, foo2\}]\par \par \par \par}}{\pard{\s8\f4 \fs22\cf5\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\brdrt\brdrs\brdrw5\brdrcf4\brdrb\brdrs\brdrw5\brdrcf4\brdrl\brdrs\brdrw5\brdrcf4\brdrr\brdrs\brdrw5\brdrcf4\cs6\f3  SaferOptions::incompatibleOptions: Some options are incompatibles \{b->\{2,-2\}\}\par}}{\pard{\s7\f2 \fs26\cf1\cb2\b0\i0\shad0\outl0\ul0\strike0\expnd0\expndtw0\ql\brdrt\brdrs\brdrw5\brdrcf4\brdrb\brdrs\brdrw5\brdrcf4\brdrl\brdrs\brdrw5\brdrcf4\brdrr\brdrs\brdrw5\brdrcf4\cs6\f3  $Failed}}}